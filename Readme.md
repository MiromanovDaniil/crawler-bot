# Price Monitoring Bot

Этот Telegram-бот предназначен для мониторинга цен на товары с различных сайтов. Пользователь может загрузить Excel-файл с данными о товарах (название, URL, XPath), и бот автоматически соберет цены, сохранит их в базу данных и предоставит отчет.

## Основные функции

- **Загрузка Excel-файла**: Пользователь может загрузить файл с данными о товарах.
- **Парсинг цен**: Бот использует Selenium для парсинга цен с указанных сайтов.
- **Сохранение в базу данных**: Все данные сохраняются в SQLite-базу данных.
- **Отчет**: Бот предоставляет пользователю отчет о результатах парсинга (количество успешных запросов, средняя цена и т.д.).

## Установка

1. **Клонируйте репозиторий**
    ```bash
    git clone <repository_url>
    cd crawler-bot
    ```

2. **Установите Poetry**
    Если у вас еще не установлен Poetry, выполните следующую команду:
    ```bash
    pip install poetry
    ```

3. **Установите зависимости**
    ```bash
    poetry install
    ```

4. **Настройте переменные окружения**
    Создайте файл `.env` в корне проекта и добавьте в него токен вашего Telegram-бота:
    ```plaintext
    TELEGRAM_TOKEN=<your_telegram_token>
    ```

5. **Активируйте виртуальное окружение Poetry и запустите бота**
    ```bash
    poetry shell
    python bot.py
    ```

## Использование

1. **Загрузите файл**: Отправьте Excel-файл с колонками `title`, `url`, `xpath`.
2. **Получите отчет**: Бот обработает файл, соберет цены и отправит вам отчет.

## Пример Excel-файла

| title | url | xpath |
|-------|-----|-------|
| Пример товара | http://example.com | /html/body/div[1]/div[2]/div |

## Библиотеки

- `python-telegram-bot` — для работы с Telegram API.
- `pandas` — для обработки Excel-файлов.
- `selenium` — для парсинга цен.
- `sqlite3` — для работы с базой данных.
- `python-dotenv` — для загрузки переменных окружения.
